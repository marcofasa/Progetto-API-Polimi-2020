#include <stdlib.h>
#include <stdio.h>
#include <string.h>

 void pLine(const char *ptr)            {         
    for( ; *ptr!='\0'; ++ptr)        
    printf("%c", *ptr);        
}         

int main(void) {
    FILE *fp;
    char **array;
    size_t bufsize = 32;
    array = malloc(bufsize * sizeof(char*));
    char *buffer=NULL;
    buffer = (char *) malloc(bufsize * sizeof(char));
    size_t command;
    int i=0;
    char eof[]="q";

    fp=fopen("prova.txt", "rt");

    while ((getline(&buffer, &bufsize, fp))) {
        printf("%s", buffer);
        array[i] = malloc(strlen(buffer) + 1);
        strcpy(array[i], buffer);
        if (strcmp(array[i],eof)==0) return 0;
        pLine(array[i]);
        i++;
    }
    return 0;

}
